<!DOCTYPE html>
{%- comment -%}
    语言检测逻辑：优先使用 page.lang，其次检查 URL 是否包含 /zh/，否则使用 site.lang
{%- endcomment -%}
{%- if page.lang -%}
    {%- assign page_lang = page.lang -%}
{%- elsif page.url contains '/zh/' -%}
    {%- assign page_lang = 'zh' -%}
{%- else -%}
    {%- assign page_lang = site.lang | default: 'en' -%}
{%- endif -%}

<html lang="{%- if page_lang == 'zh' -%}zh-CN{%- else -%}en{%- endif -%}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if page.title %}{{ page.title }} - {% endif %}{{ site.title }}</title>
    <meta name="description" content="{{ page.excerpt | default: site.description | strip_html | truncatewords: 20 }}">
    
    <!-- SEO 标签 -->
    {% seo %}
    
    <!-- 样式表 -->
    <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
    <!-- 网站图标（favicon）：使用 assets/images/logo_main.png -->
    <!-- 使用 relative_url 以兼容 site.baseurl -->
    <link rel="icon" type="image/png" href="{{ '/assets/images/logo_main.png' | relative_url }}">
    <link rel="shortcut icon" href="{{ '/assets/images/logo_main.png' | relative_url }}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ '/assets/images/logo_main.png' | relative_url }}">
    
    <!-- 字体 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <header class="site-header">
        <div class="header-content">
            <div class="site-brand">
                <div class="title-wrap" role="banner">
                    <!-- 弹幕容器已移除：保持 logo 与 title 的简洁展示 -->
                    <a href="{{ '/' | relative_url }}" class="brand-link" aria-label="{{ site.title }}">
                        <img src="{{ '/assets/images/logo_main.svg' | relative_url }}" alt="site logo" class="brand-logo">
                    </a>

                    <img src="{{ '/assets/images/title.svg' | relative_url }}" alt="{{ site.title }}" class="title-svg">
                </div>
            </div>

                        <!-- 简化头部：移除冗长的站点描述，使页面头部更简洁 -->
        </div>
    </header>

    <nav class="site-nav">
                <ul class="nav-menu">
                        {%- comment -%} 使用 page_lang 切换导航标签（英文/中文） {%- endcomment -%}
                        {%- if page_lang == 'zh' -%}
                            <li><a href="{{ '/' | relative_url }}" class="nav-link {% if page.url == '/' or page.url == '/zh/' %}active{% endif %}">首页</a></li>
                            <li><a href="{{ '/agenda/' | relative_url }}" class="nav-link {% if page.url == '/agenda/' or page.url == '/zh/agenda/' %}active{% endif %}">会议议程</a></li>
                            <li><a href="{{ '/organizers/' | relative_url }}" class="nav-link {% if page.url == '/organizers/' or page.url == '/zh/organizers/' %}active{% endif %}">组织人员</a></li>
                            <li><a href="{{ '/contact/' | relative_url }}" class="nav-link {% if page.url == '/contact/' or page.url == '/zh/contact/' %}active{% endif %}">联系方式</a></li>
                            <li><a href="{{ '/past-events/' | relative_url }}" class="nav-link {% if page.url == '/past-events/' or page.url == '/zh/past-events/' %}active{% endif %}">往届回顾</a></li>
                        {%- else -%}
                            <li><a href="{{ '/' | relative_url }}" class="nav-link {% if page.url == '/' %}active{% endif %}">Home</a></li>
                            <li><a href="{{ '/agenda/' | relative_url }}" class="nav-link {% if page.url == '/agenda/' %}active{% endif %}">Agenda</a></li>
                            <li><a href="{{ '/organizers/' | relative_url }}" class="nav-link {% if page.url == '/organizers/' %}active{% endif %}">Organizers</a></li>
                            <li><a href="{{ '/contact/' | relative_url }}" class="nav-link {% if page.url == '/contact/' %}active{% endif %}">Contact</a></li>
                            <li><a href="{{ '/past-events/' | relative_url }}" class="nav-link {% if page.url == '/past-events/' %}active{% endif %}">Past events</a></li>
                        {%- endif -%}

                        {%- comment -%} 语言切换：始终提供到英文根页与中文 /zh/ 的链接 {%- endcomment -%}
                        <li class="lang-switcher" style="margin-left:1rem;">
                            {%- if page_lang == 'zh' -%}
                                <a href="{{ '/' | relative_url }}" class="nav-link">English</a> |
                                <a href="{{ '/zh/' | relative_url }}" class="nav-link active">中文</a>
                            {%- else -%}
                                <a href="{{ '/' | relative_url }}" class="nav-link active">English</a> |
                                <a href="{{ '/zh/' | relative_url }}" class="nav-link">中文</a>
                            {%- endif -%}
                        </li>
                </ul>
    </nav>

    <main class="site-main">
        <div class="container">
            {{ content }}
        </div>
    </main>

    <footer class="site-footer">
        <p>&copy; 2019-2025 致远物理咯咯 | 上海交通大学物理学院致远学院</p>
        <p style="font-size: 0.9em; margin-top: 0.5em;">
            <a href="https://www.sjtu.edu.cn" target="_blank">上海交通大学</a> | 
            <a href="https://zhiyuan.sjtu.edu.cn/" target="_blank">上海交通大学致远学院</a>
        </p>
    </footer>

    <script src="{{ '/assets/js/script.js' | relative_url }}"></script>
</body>
</html>
